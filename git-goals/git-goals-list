#!/bin/bash
set -euo pipefail

echo "Current Goals:"
git notes --ref=goals list | while read -r note_ref commit_hash; do
    goal_data=$(git notes --ref=goals show "$commit_hash")
    id=$(echo "$goal_data" | grep "^id:" | cut -d" " -f2-)
    status=$(echo "$goal_data" | grep "^status:" | cut -d" " -f2-)
    description=$(echo "$goal_data" | grep "^description:" | cut -d" " -f2-)
    echo "- $id ($status): $description"
done
