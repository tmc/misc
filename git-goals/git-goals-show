#!/bin/bash
set -euo pipefail

if [ $# -eq 0 ]; then
    echo "Usage: git goals show <goal_id>"
    exit 1
fi

goal_id="$1"

# Check if .git-goals file exists
if [ ! -f .git-goals ]; then
    echo "Error: No goals found. Use 'git goals create' to add a new goal."
    exit 1
fi

# Search for the goal with the given ID
goal=$(grep "^#$goal_id |" .git-goals)

if [ -z "$goal" ]; then
    echo "Error: Goal with ID $goal_id not found."
    exit 1
fi

# Parse and display the goal details
IFS='|' read -r _ status description <<< "$goal"
echo "ID: $goal_id"
echo "Status: ${status## }"
echo "Description: ${description## }"

