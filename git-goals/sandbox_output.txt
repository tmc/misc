+ set -euo pipefail
++ git rev-parse --show-toplevel
+ repo_root=/Users/tmc/go/src/github.com/tmc/misc
+ '[' -z /Users/tmc/go/src/github.com/tmc/misc ']'
+ COPY=false
+ REMOVE_CONTAINER=false
+ NAMESPACE=sandbox-exec
+ SANDBOX_DEPTH=0
+ SANDBOX_DEPTH=1
+ SANDBOX_EXTRA_ENV=SANDBOX_EXTRA_ENV
+ [[ 1 -gt 0 ]]
+ case "$1" in
+ break
+ WS_ROOT=/Users/tmc/go/src/github.com/tmc/misc
+ export DOTFILES_HOME=/Users/tmc
+ DOTFILES_HOME=/Users/tmc
+ export BASHRC_PATH=/Users/tmc/.bashrc
+ BASHRC_PATH=/Users/tmc/.bashrc
++ pwd
+ current_path=/Users/tmc/go/src/github.com/tmc/misc/git-goals
+ relative_path=git-goals
+++ dirname /Users/tmc/go/src/github.com/tmc/misc/sandbox-exec/sandbox-exec
++ cd /Users/tmc/go/src/github.com/tmc/misc/sandbox-exec
++ pwd
+ script_dir=/Users/tmc/go/src/github.com/tmc/misc/sandbox-exec
+ dockerfile_path=/Users/tmc/go/src/github.com/tmc/misc/sandbox-exec/.sandbox-exec.dockerfile
+ dockerfile_context=/Users/tmc/go/src/github.com/tmc/misc/sandbox-exec
++ md5sum /Users/tmc/go/src/github.com/tmc/misc/sandbox-exec/.sandbox-exec.dockerfile
++ cut -c-5
+ docker_tag=sandbox-exec:00596
++ docker images -q sandbox-exec:00596
+ '[' '!' d53cb8fad5dc ']'
+ '[' '!' -z '' ']'
++ date +%s
+ container_name=sandbox-exec-d1-1723444670-28587
+ '[' false = true ']'
+ git notes --ref=sandbox-exec append -m sandbox-exec-d1-1723444670-28587
+ '[' -f /Users/tmc/.bashrc_sandbox-exec ']'
+ BASHRC_PATH=/Users/tmc/.bashrc_sandbox-exec
+ BASHRC_MOUNT='-v /Users/tmc/.bashrc_sandbox-exec:/root/.bashrc:ro'
+ docker_run_opts=
+ '[' false = true ']'
+ start_container ./test-git-goals.sh
+ common_opts=('-it' '--name' 'sandbox-exec-d1-1723444670-28587' '-v' '/Users/tmc/go/src/github.com/tmc/misc:/workspace' '-v' '/var/run/docker.sock:/var/run/docker.sock' '-v' '/Users/tmc/.gitconfig:/root/.gitconfig:ro' '-v' '/Users/tmc/.bashrc_sandbox-exec:/root/.bashrc:ro' '-e' 'DOTFILES_HOME' '-e' 'BASHRC_PATH' '-e' 'SANDBOX_EXTRA_ENV' '-e' 'SANDBOX_DEPTH=1' '-e' 'WS_ROOT=/Users/tmc/go/src/github.com/tmc/misc' '--net=host' '-w' '/workspace' 'sandbox-exec:00596')
+ local common_opts
+ '[' 1 -eq 0 ']'
+ docker run -it --name sandbox-exec-d1-1723444670-28587 -v /Users/tmc/go/src/github.com/tmc/misc:/workspace -v /var/run/docker.sock:/var/run/docker.sock -v /Users/tmc/.gitconfig:/root/.gitconfig:ro -v /Users/tmc/.bashrc_sandbox-exec:/root/.bashrc:ro -e DOTFILES_HOME -e BASHRC_PATH -e SANDBOX_EXTRA_ENV -e SANDBOX_DEPTH=1 -e WS_ROOT=/Users/tmc/go/src/github.com/tmc/misc --net=host -w /workspace sandbox-exec:00596 /bin/bash -c 'cd '\''git-goals'\'' && exec ./test-git-goals.sh'
++ pwd
+ export PATH=/workspace/git-goals:/go/bin:/usr/local/go/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+ PATH=/workspace/git-goals:/go/bin:/usr/local/go/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+ pwd
/workspace/git-goals
+ ls -alh
total 104K
drwxr-xr-x 24 root root  768 Aug 12 06:37 .
drwxr-xr-x 77 root root 2.5K Aug 12 03:44 ..
-rw-r--r--  1 root root  24K Aug 12 06:07 .bash_history
-rw-r--r--  1 root root    0 Aug 12 04:50 .claude-prefill
-rw-r--r--  1 root root 3.6K Aug 12 05:59 .claude-system-prompt
-rw-r--r--  1 root root 2.2K Aug 12 06:25 .claude-system-prompt-analyze-attempt
-rw-r--r--  1 root root   14 Aug 12 05:17 .gitignore
-rw-r--r--  1 root root   30 Aug 12 05:22 .goals
-rw-r--r--  1 root root  205 Aug 12 05:22 .meta-exec-next-step
-rwxr-xr-x  1 root root 1.8K Aug 12 04:33 README.md
-rw-r--r--  1 root root 1.3K Aug 12 04:42 USAGE.md
-rwxr-xr-x  1 root root 1.6K Aug 12 05:51 eval-make-safe-progress.sh
-rwxr-xr-x  1 root root 1.1K Aug 12 04:33 git-goals
-rwxr-xr-x  1 root root 2.4K Aug 12 04:33 git-goals-complete
-rwxr-xr-x  1 root root 1.5K Aug 12 05:41 git-goals-create
-rwxr-xr-x  1 root root  425 Aug 12 04:33 git-goals-delete
-rwxr-xr-x  1 root root  480 Aug 12 04:33 git-goals-list
-rwxr-xr-x  1 root root  785 Aug 12 04:33 git-goals-report
-rwxr-xr-x  1 root root  605 Aug 12 04:33 git-goals-show
-rwxr-xr-x  1 root root  840 Aug 12 04:33 git-goals-update
-rw-r--r--  1 root root  480 Aug 12 06:36 iter
-rwxr-xr-x  1 root root 1.6K Aug 12 06:32 make-safe-progress.sh
-rw-r--r--  1 root root 2.8K Aug 12 06:37 sandbox_output.txt
-rwxr-xr-x  1 root root 1.5K Aug 12 06:37 test-git-goals.sh
+ set +x
Setting up test repository...
[33mhint: Using 'master' as the name for the initial branch. This default branch name[m
[33mhint: is subject to change. To configure the initial branch name to use in all[m
[33mhint: of your new repositories, which will suppress this warning, call:[m
[33mhint: [m
[33mhint: 	git config --global init.defaultBranch <name>[m
[33mhint: [m
[33mhint: Names commonly chosen instead of 'master' are 'main', 'trunk' and[m
[33mhint: 'development'. The just-created branch can be renamed via this command:[m
[33mhint: [m
[33mhint: 	git branch -m <name>[m
Initialized empty Git repository in /tmp/tmp.ARameAABiQ/.git/
[master (root-commit) 262e27a] Initial commit
Testing git-goals...
$ git goals create Implement new feature
[master 7281b42] Goal: Implement new feature
Created new goal with ID: 20240812063751
Description: Implement new feature

$ git goals list
error: no note found for object c2cd788aba86f362a21bd81e50a15f6607248118.
