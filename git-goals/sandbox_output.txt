+ set -euo pipefail
++ pwd
+ export PATH=/workspace/git-goals:/go/bin:/usr/local/go/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+ PATH=/workspace/git-goals:/go/bin:/usr/local/go/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ mktemp -d
+ test_dir=/tmp/tmp.yYJtWEgWVR
+ cd /tmp/tmp.yYJtWEgWVR
+ echo 'Setting up test repository...'
Setting up test repository...
+ git init
[33mhint: Using 'master' as the name for the initial branch. This default branch name[m
[33mhint: is subject to change. To configure the initial branch name to use in all[m
[33mhint: of your new repositories, which will suppress this warning, call:[m
[33mhint: [m
[33mhint: 	git config --global init.defaultBranch <name>[m
[33mhint: [m
[33mhint: Names commonly chosen instead of 'master' are 'main', 'trunk' and[m
[33mhint: 'development'. The just-created branch can be renamed via this command:[m
[33mhint: [m
[33mhint: 	git branch -m <name>[m
Initialized empty Git repository in /tmp/tmp.yYJtWEgWVR/.git/
+ git config user.email test@example.com
+ git config user.name 'Test User'
+ git commit --allow-empty -m 'Initial commit'
[master (root-commit) 7efa0f2] Initial commit
+ echo 'Testing git-goals...'
Testing git-goals...
+ run_command git goals create 'Implement new feature'
+ echo '$ git' goals create 'Implement new feature'
$ git goals create Implement new feature
++ git goals create 'Implement new feature'
+ output='[master 6c1fcc6] Goal: Implement new feature
Created new goal with ID: 20240812072627
Description: Implement new feature'
+ echo '[master 6c1fcc6] Goal: Implement new feature
Created new goal with ID: 20240812072627
Description: Implement new feature'
[master 6c1fcc6] Goal: Implement new feature
Created new goal with ID: 20240812072627
Description: Implement new feature
+ echo

+ run_command git goals list
+ echo '$ git' goals list
$ git goals list
++ git goals list
error: no note found for object 800a2b6ce552f82a65f80890a224ae99bcce97cf.
+ output='Current Goals:
-  (): '
+ echo 'Current Goals:
-  (): '
Current Goals:
-  (): 
+ echo

++ git goals list
++ grep 'Implement new feature'
++ sed -E 's/- ([^ ]+) .*/\1/'
error: no note found for object 800a2b6ce552f82a65f80890a224ae99bcce97cf.
+ goal_id=
