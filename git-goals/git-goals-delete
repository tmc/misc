#!/usr/bin/bash
source "$(dirname "$0")/git-goals-common.sh"
# Input validation and error handling
# Load configuration
    source ".git-goals-config"
else
    echo "Warning: .git-goals-config not found. Using default settings."
fi
    source ".git-goals-config"
fi

NOTE_REF_NAME=${NOTE_REF_NAME:-goals}
DATE_FORMAT=${DATE_FORMAT:-%Y-%m-%d}
MAX_GOALS_DISPLAY=${MAX_GOALS_DISPLAY:-0}


set -euo pipefail
nload_config
check_args "$@"



goal_id="$1"

commit_hash=$(git notes --ref=goals list | grep "$goal_id" | awk "{print \$1}")

if [ -z "$commit_hash" ]; then
    echo -e "\033[1mError: Goal with ID $goal_id not found."
    exit 1
fi

git notes --ref=goals remove "$commit_hash"

echo -e "\033[1mGoal $goal_id deleted"
