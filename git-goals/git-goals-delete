#!/bin/bash
# git-goals-delete - Deletes a goal
set -euo pipefail

if [ $# -eq 0 ]; then
    echo "Usage: git goals delete <goal_id>"
    exit 1
fi

goal_id="$1"

# Find the commit hash for the given goal ID
commit_hash=$(git notes --ref=goals list | grep "$goal_id" | awk "{print \$1}")

if [ -z "$commit_hash" ]; then
    echo "Error: Goal with ID $goal_id not found."
    exit 1
fi

# Remove the git note for the goal
git notes --ref=goals remove "$commit_hash"

echo "Goal $goal_id deleted"

