# Test CSS loading and verbose mode

# Start server with custom CSS file and verbose mode
md2html -css doc.md -v -http :9011 &
sleep 1s

# Custom CSS should be included in the output
exec curl -s http://localhost:9011/
stdout 'background: #f0f0f0'

# Test with non-existent CSS file (error path)
md2html -css doc.md -v -http :9012 &
sleep 200ms

# Test verbose mode with directory depth
md2html -v -depth 3 -http :9013 &
sleep 200ms

# Clean up background process

-- doc.md --
# Test Document

This tests CSS loading functionality.

-- custom.css --
/* Custom CSS loaded successfully */
body {
  background: #f0f0f0;
  color: #333;
}

.custom-class {
  font-size: 18px;
  margin: 20px;
}