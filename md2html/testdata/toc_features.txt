# Test TOC generation and frontmatter rendering

# Test with TOC enabled
md2html -toc doc_with_headers.md :9014 &
sleep 1s

# Should include table of contents
exec curl -s http://localhost:9014/
stdout 'id="toc"'

# Test frontmatter rendering
md2html -render-frontmatter doc_with_frontmatter.md :9015 &
sleep 1s

# Frontmatter should be visible as YAML block
exec curl -s http://localhost:9015/
stdout 'language-yaml'

# Clean up background process

-- doc_with_headers.md --
# Main Title

## Introduction

This is the introduction section.

### Subsection 1.1

Content for subsection 1.1

### Subsection 1.2

Content for subsection 1.2

## Second Section

This is the second main section.

### Subsection 2.1

More content here.

## Conclusion

Final thoughts.

-- doc_with_frontmatter.md --
---
title: Document with Frontmatter
author: Test Author
date: 2024-01-01
tags:
  - test
  - example
---

# Document Content

This document has YAML frontmatter that can be rendered or hidden.