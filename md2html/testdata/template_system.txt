# Test template system with custom templates

# Create custom template directory
mkdir custom-templates

# Start server with custom templates
md2html -templates template_test.md -http :8294 &
sleep 1s

# Check custom styles are applied
exec curl -s http://localhost:8294/
stdout 'background: #123456'

# Test that template includes custom CSS class
exec curl -s http://localhost:8294/
stdout 'custom-test'

# Cleanup
rm -rf custom-templates

# Clean up background process

-- template_test.md --
# Custom Template Test

This page uses custom templates.

-- custom-templates/styles.html --
{{define "styles"}}
<style>
    body { background: #123456; }
    .custom-test { color: red; }
</style>
{{end}}