# Test YAML frontmatter handling

# Start server normally (frontmatter should be stripped)
md2html -http :8195 frontmatter.md &
sleep 1s

# Test that frontmatter is not visible in output by default
curl -s http://localhost:8195/
! stdout 'title: Test Document'

# Test content after frontmatter is rendered
curl -s http://localhost:8195/
stdout 'Content After Frontmatter'


# Now test with -render-frontmatter flag
md2html -render-frontmatter -http :8296 frontmatter.md &
sleep 1s

# Test that frontmatter IS visible with flag (rendered as YAML code block)
curl -s http://localhost:8296/
stdout 'Test Author'

# Clean up background process

-- frontmatter.md --
---
title: Test Document
author: Test Author
date: 2024-01-01
---

# Content After Frontmatter

This is the actual content.