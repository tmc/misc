// Code generated by parse-tc-module. DO NOT EDIT.

package mysql

import (
	"fmt"
	"time"

	"github.com/tmc/misc/testctr"
	"github.com/tmc/misc/testctr/ctropts"
)

// Default returns the default configuration for mysql containers.
func Default() testctr.Option {
	return testctr.Options(
		testctr.WithPort("3306"),
		ctropts.WithWaitForLog("ready for connections", 30*time.Second),
		WithDSN(),
		testctr.WithEnv("MYSQL_ROOT_PASSWORD", "test"),
		testctr.WithEnv("MYSQL_DATABASE", "test"),
	)
}

func WithDefaultCredentials() testctr.Option {
	return testctr.WithEnv("MYSQL_USER", "root")
}

func WithUsername(username string) testctr.Option {
	return testctr.WithEnv("MYSQL_USER", username)
}

func WithPassword(password string) testctr.Option {
	return testctr.WithEnv("MYSQL_PASSWORD", password)
}

func WithDatabase(database string) testctr.Option {
	return testctr.WithEnv("MYSQL_DATABASE", database)
}

func WithConfigFile(configFile string) testctr.Option {
	return ctropts.WithBindMount(configFile, "/etc/mysql/conf.d/custom.cnf")
}

func WithScripts(scripts ...string) testctr.Option {
	opts := make([]testctr.Option, len(scripts))
	for i, script := range scripts {
		opts[i] = ctropts.WithBindMount(script, fmt.Sprintf("/docker-entrypoint-initdb.d/%02d-script.sql", i))
	}
	return testctr.Options(opts...)
}
